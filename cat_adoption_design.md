# 猫咪在线认领商城微信小程序设计方案

## 一、模块设计

1. **用户模块**
   - 用户注册/登录
   - 个人信息管理
   - 收货地址管理
   - 我的订单
   - 我的收藏

2. **猫咪展示模块**
   - 猫咪列表
   - 猫咪详情
   - 猫咪搜索/筛选
   - 猫咪分类浏览

3. **认领流程模块**
   - 认领申请
   - 资格审核
   - 线上支付
   - 认领协议

4. **订单管理模块**
   - 订单创建
   - 订单支付
   - 订单状态跟踪
   - 订单取消/退款

5. **社区互动模块**
   - 猫咪故事分享
   - 认领心得
   - 评论与点赞
   - 养猫知识科普

6. **管理员后台模块**
   - 猫咪信息管理
   - 订单管理
   - 用户管理
   - 数据统计分析

## 二、功能点清单

### 用户端功能

1. **用户账户**
   - 微信一键登录
   - 个人资料设置
   - 实名认证
   - 收货地址管理

2. **猫咪浏览**
   - 首页推荐
   - 分类筛选（年龄、品种、性格等）
   - 搜索功能
   - 收藏喜欢的猫咪

3. **猫咪详情**
   - 基本信息展示（品种、年龄、性别、健康状况等）
   - 多图展示
   - 性格描述
   - 领养要求
   - 领养费用说明
   - 相似猫咪推荐

4. **认领流程**
   - 提交认领申请
   - 填写认领问卷
   - 线上面谈预约
   - 认领资格审核
   - 支付认领费用
   - 签署电子认领协议
   - 配送/自提选择

5. **订单管理**
   - 订单创建与支付
   - 订单状态查询
   - 订单取消
   - 退款申请

6. **社区互动**
   - 发布认领心得
   - 分享养猫日常
   - 查看/参与讨论
   - 关注其他用户

7. **消息通知**
   - 认领进度通知
   - 订单状态更新
   - 系统公告
   - 互动消息

### 管理员功能

1. **猫咪管理**
   - 添加/编辑猫咪信息
   - 上传猫咪照片
   - 设置认领条件
   - 猫咪状态管理（可认领、已认领、暂不可认领等）

2. **订单管理**
   - 订单查询
   - 订单状态更新
   - 退款处理

3. **用户管理**
   - 用户信息查看
   - 认领资格审核
   - 用户黑名单管理

4. **数据统计**
   - 认领数据统计
   - 用户行为分析
   - 收入统计

## 三、数据库表结构

### 1. 用户表(user)
```
- id: 主键
- openid: 微信openid
- nickname: 昵称
- avatar: 头像
- real_name: 真实姓名
- id_card: 身份证号
- phone: 手机号
- gender: 性别
- create_time: 创建时间
- update_time: 更新时间
- status: 状态(0-正常,1-禁用)
```

### 2. 地址表(address)
```
- id: 主键
- user_id: 用户id(外键)
- receiver: 收货人
- phone: 联系电话
- province: 省份
- city: 城市
- district: 区县
- detail_address: 详细地址
- is_default: 是否默认(0-否,1-是)
- create_time: 创建时间
- update_time: 更新时间
```

### 3. 猫咪表(cat)
```
- id: 主键
- name: 猫咪名称
- breed: 品种
- age: 年龄
- gender: 性别(0-公,1-母)
- weight: 体重
- color: 毛色
- character: 性格特点
- health_status: 健康状况
- vaccine_status: 疫苗接种情况
- sterilization: 绝育情况(0-未绝育,1-已绝育)
- description: 详细描述
- adoption_requirements: 认领要求
- adoption_fee: 认领费用
- status: 状态(0-可认领,1-认领中,2-已认领,3-暂不可认领)
- create_time: 创建时间
- update_time: 更新时间
```

### 4. 猫咪图片表(cat_image)
```
- id: 主键
- cat_id: 猫咪id(外键)
- image_url: 图片地址
- sort_order: 排序顺序
- is_cover: 是否封面(0-否,1-是)
- create_time: 创建时间
```

### 5. 猫咪分类表(cat_category)
```
- id: 主键
- name: 分类名称
- icon: 分类图标
- sort_order: 排序顺序
- create_time: 创建时间
- update_time: 更新时间
```

### 6. 猫咪分类关联表(cat_category_relation)
```
- id: 主键
- cat_id: 猫咪id(外键)
- category_id: 分类id(外键)
```

### 7. 收藏表(favorite)
```
- id: 主键
- user_id: 用户id(外键)
- cat_id: 猫咪id(外键)
- create_time: 创建时间
```

### 8. 认领申请表(adoption_application)
```
- id: 主键
- user_id: 用户id(外键)
- cat_id: 猫咪id(外键)
- living_condition: 居住条件
- experience: 养猫经验
- family_members: 家庭成员情况
- reason: 认领原因
- status: 状态(0-待审核,1-审核通过,2-审核不通过)
- admin_remark: 管理员备注
- create_time: 创建时间
- update_time: 更新时间
```

### 9. 订单表(order)
```
- id: 主键
- order_no: 订单编号
- user_id: 用户id(外键)
- cat_id: 猫咪id(外键)
- application_id: 认领申请id(外键)
- total_amount: 订单金额
- pay_amount: 实付金额
- pay_time: 支付时间
- pay_type: 支付方式(0-微信支付)
- delivery_type: 配送方式(0-自提,1-配送)
- address_id: 地址id(外键,配送时使用)
- status: 状态(0-待支付,1-已支付,2-已完成,3-已取消,4-已退款)
- remark: 备注
- create_time: 创建时间
- update_time: 更新时间
```

### 10. 认领协议表(adoption_agreement)
```
- id: 主键
- order_id: 订单id(外键)
- user_id: 用户id(外键)
- cat_id: 猫咪id(外键)
- agreement_content: 协议内容
- sign_time: 签署时间
- create_time: 创建时间
```

### 11. 社区帖子表(post)
```
- id: 主键
- user_id: 用户id(外键)
- cat_id: 猫咪id(外键,可为空)
- title: 标题
- content: 内容
- view_count: 浏览量
- like_count: 点赞数
- comment_count: 评论数
- status: 状态(0-正常,1-下架)
- create_time: 创建时间
- update_time: 更新时间
```

### 12. 帖子图片表(post_image)
```
- id: 主键
- post_id: 帖子id(外键)
- image_url: 图片地址
- sort_order: 排序顺序
- create_time: 创建时间
```

### 13. 评论表(comment)
```
- id: 主键
- post_id: 帖子id(外键)
- user_id: 用户id(外键)
- parent_id: 父评论id(回复评论时使用)
- content: 评论内容
- like_count: 点赞数
- status: 状态(0-正常,1-删除)
- create_time: 创建时间
```

### 14. 点赞表(like)
```
- id: 主键
- user_id: 用户id(外键)
- target_id: 目标id
- target_type: 目标类型(0-帖子,1-评论)
- create_time: 创建时间
```

### 15. 消息表(message)
```
- id: 主键
- user_id: 用户id(外键)
- title: 消息标题
- content: 消息内容
- type: 消息类型(0-系统消息,1-订单消息,2-互动消息)
- is_read: 是否已读(0-未读,1-已读)
- create_time: 创建时间
```

## 四、页面清单

### 用户端页面

1. **首页**
   - 轮播图展示
   - 猫咪分类导航
   - 推荐猫咪列表
   - 最新上架猫咪
   - 认领成功故事

2. **分类页**
   - 猫咪分类列表
   - 筛选条件(年龄、性别、品种等)
   - 猫咪列表展示
   - 排序功能

3. **猫咪详情页**
   - 猫咪图片轮播
   - 基本信息展示
   - 详细描述
   - 认领要求
   - 认领费用
   - 认领按钮
   - 收藏功能
   - 相似猫咪推荐

4. **认领申请页**
   - 申请表单
   - 认领须知
   - 提交申请

5. **认领协议页**
   - 协议内容展示
   - 电子签名
   - 确认签署

6. **订单确认页**
   - 猫咪信息确认
   - 费用明细
   - 配送方式选择
   - 地址选择(配送时)
   - 备注信息
   - 提交订单

7. **支付页**
   - 订单信息
   - 支付方式选择
   - 支付按钮

8. **我的订单页**
   - 订单列表
   - 订单状态筛选
   - 订单详情入口

9. **订单详情页**
   - 订单状态
   - 猫咪信息
   - 订单信息
   - 支付信息
   - 配送信息
   - 操作按钮(取消订单、申请退款等)

10. **个人中心页**
    - 用户信息展示
    - 我的订单入口
    - 我的收藏入口
    - 地址管理入口
    - 我的帖子入口
    - 消息通知入口
    - 设置入口

11. **地址管理页**
    - 地址列表
    - 新增/编辑地址
    - 设置默认地址

12. **我的收藏页**
    - 收藏的猫咪列表
    - 取消收藏功能

13. **社区首页**
    - 热门帖子
    - 最新帖子
    - 发布按钮

14. **帖子详情页**
    - 帖子内容
    - 评论列表
    - 发表评论
    - 点赞功能

15. **发布帖子页**
    - 标题输入
    - 内容编辑
    - 图片上传
    - 关联猫咪(可选)
    - 发布按钮

16. **消息中心页**
    - 消息分类
    - 消息列表
    - 消息详情

### 管理员后台页面

1. **登录页**
   - 账号密码登录

2. **首页/数据看板**
   - 数据统计概览
   - 待处理事项提醒

3. **猫咪管理页**
   - 猫咪列表
   - 新增/编辑猫咪
   - 状态管理

4. **猫咪详情编辑页**
   - 基本信息编辑
   - 图片管理
   - 分类设置
   - 状态设置

5. **订单管理页**
   - 订单列表
   - 订单筛选
   - 订单详情
   - 订单状态更新

6. **认领申请审核页**
   - 申请列表
   - 申请详情
   - 审核操作

7. **用户管理页**
   - 用户列表
   - 用户详情
   - 状态管理

8. **社区管理页**
   - 帖子列表
   - 帖子审核
   - 评论管理

9. **系统设置页**
   - 基本设置
   - 分类管理
   - 协议模板设置

## 五、实现思路

1. **技术选型**
   - 前端：微信小程序原生开发或使用uni-app框架
   - 后端：Node.js(Express/Koa) + MySQL
   - 云服务：微信云开发或自建服务器
   - 图片存储：微信云存储或对象存储服务
   - 支付：微信支付

2. **架构设计**
   - 采用前后端分离架构
   - RESTful API设计
   - JWT认证
   - 微服务拆分(可选，根据业务规模)

3. **开发流程**
   - 需求分析与原型设计
   - 数据库设计
   - API接口设计
   - 前端页面开发
   - 后端接口开发
   - 联调测试
   - 上线部署

4. **安全考虑**
   - 数据加密传输
   - 敏感信息加密存储
   - 权限控制
   - 防SQL注入
   - 防XSS攻击
   - 日志记录与审计

5. **性能优化**
   - 数据库索引优化
   - 缓存策略(Redis)
   - 图片压缩与CDN加速
   - 小程序分包加载
   - 延迟加载与预加载

6. **扩展性考虑**
   - 模块化设计
   - 配置中心
   - 服务监控
   - 容器化部署(Docker)
   - CI/CD自动化部署

7. **运营支持**
   - 数据统计与分析
   - 用户行为跟踪
   - 推送通知
   - 内容管理
   - 活动策划支持

8. **迭代规划**
   - 核心功能优先实现
   - 分阶段上线
   - 用户反馈收集
   - 持续优化迭代